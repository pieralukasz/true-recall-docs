---
// Navigation links for the header - Credits + Login/Dashboard
---

<nav-links>
	<a href="/credits" class="nav-link">Credits</a>
	<a href="/login" class="nav-link auth-link" data-auth-link>Login</a>
</nav-links>

<script>
	import { supabase } from "../lib/supabase";

	class NavLinksElement extends HTMLElement {
		async connectedCallback() {
			try {
				const {
					data: { session },
				} = await supabase.auth.getSession();
				const authLink = this.querySelector(
					"[data-auth-link]",
				) as HTMLAnchorElement;

				if (session) {
					authLink.href = "/dashboard";
					authLink.textContent = "Dashboard";
				}
			} catch (error) {
				console.error("Error checking auth state:", error);
			}
		}
	}

	customElements.define("nav-links", NavLinksElement);
</script>

<style>
	nav-links {
		display: flex;
		align-items: center;
		gap: 1rem;
	}

	.nav-link {
		color: var(--sl-color-gray-2);
		font-size: 0.875rem;
		font-weight: 500;
		text-decoration: none;
		padding: 0.25rem 0.5rem;
		border-radius: 0.25rem;
		transition: color 0.2s;
	}

	.nav-link:hover {
		color: var(--sl-color-white);
		text-decoration: none;
	}

	.auth-link {
		background: var(--sl-color-accent);
		color: var(--sl-color-white);
		padding: 0.375rem 0.75rem;
	}

	.auth-link:hover {
		filter: brightness(1.1);
		color: var(--sl-color-white);
	}
</style>
